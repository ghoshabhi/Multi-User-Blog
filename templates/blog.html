{% extends "master.html" %}

{% block navigation %}
 {% if user %}
  <li class="dropdown">
    <a href="#" class="dropdown-toggle" data-toggle="dropdown"><em>{{user.fullname}}</em><b class="caret"></b></a>
    <ul class="dropdown-menu">
      <li><a href="/newpost">New Post</a></li>
      <li><a href="#">All Posts</a></li>
      <li><a href="#">Drafts</a></li>
      <li class="divider"></li>
      <li><a href="/profile/{{ user.key | filterKey}}">Profile</a></li>
      <li><a href="#">Report Problem</a></li>
      <li><a href="/logout">Sign Out</a></li>
    </ul>
  </li>
{% else %}
  <li class="dropdown">
    <a href="#" class="dropdown-toggle" data-toggle="dropdown"><b>Welcome</b><b class="caret"></b></a>
    <ul class="dropdown-menu">
      <li><a href="/login">Login</a></li>
      <li><a href="/register">Signup</a></li>
    </ul>
  </li>
{% endif %} 
{% endblock navigation %}


{% block content %}
{% if post %}

<ol class="breadcrumb" style="margin-bottom: 5px;">
  <li><a href='/home'>Home</a></li>
  <li><a href='/allposts'>All Posts</a></li>
  <li class="active">{{post.title}}</a></li>
</ol>

<div class="row">
  <div class="col-md-8">
    <h1 style="color:#1BC1A1;font-weight:900;font-size:58px;font-family:'Josefin Slab','Open Sans', sans-serif">
      {{post.title | safe}}
    </h1>
  </div>

  <div class="col-md-8" style="text-align: justify;text-justify: inter-word;">
    <br>
    {{post.content | safe}}
  </div>
  <!-- <a data-key='comment' name="comments" style="cursor:pointer" data-toggle="modal" data-target="#myModal">
    Click to add a comment!
  </a> -->
</div>
  <br><br>
<hr>
<div class="row">
  <div class="col-md-5">
    <form method="post" action='/comment/{{post.key | filterKey}}' >
      <h4>Give your thoughts about the blog here... </h4>
      <textarea name='comment' placeholder="Write a comment!" style="margin-bottom:5px" class="form-control" rows='3'></textarea>
      <input type="submit" id="postComment" class="btn btn-success" value="Post!">
      <span></span>
      <input type="reset" class="btn btn-danger" value="Reset">
    </form>
  </div>
<!-- </div> -->


    <div class="col-md-8" style="margin-top:10px">
      <div style="border-left:3px solid #e5e5e5;">
        <h4 style="padding:15px">Comments:</h4>
      </div>

      {% if comments %}
        {% for each_comment in comments %}
          <div style="margin:10px;">
          <div class="row">
            <a class="story-img" href="/profile/{{each_comment['c_u_id']}}">
              <img src="/static/no-user.png" style="width:50px;height:50px" class="img-circle">
                <span style="color:#1BC1A1">{{each_comment['c_u_name']}}</span>
            </a>
            <p style="margin-left:50px;">
              {{each_comment['c_comment']}}
            </p>
          </div>
        </div>
        {% endfor %}
      {% else %}
      <div style="margin:10px;">
        <div class="row">
          <p style="margin-left:50px;">
            No Comments!
          </p>
        </div>
      </div>
      {% endif %}
    </div>
</div>

</div>

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Add Comment : <b>{{post.title}}</b></h4>
      </div>
      <div class="modal-body">
        <div>
          <p>Type in your comment here...</p>
          <textarea class="form-control" rows='2'></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <a href='/home' class="btn btn-default" data-dismiss="modal">Close</a>
        <button type="button" class="btn btn-primary">Post Comment</button>
      </div>
    </div>
  </div>
</div>
  {% endif %}
{% endblock %}