<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta name="generator" content=
  "HTML Tidy for Linux (vers 25 March 2009), see www.w3.org" />
  <meta http-equiv="content-type" content="text/html; charset=us-ascii" />
  <meta charset="utf-8" />

  <title>You're Dream Blog is here!</title>
  <meta name="generator" content="Bootply" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <link href="/static/bootstrap.min.css" rel="stylesheet" type="text/css" />
  <link href="/static/login.css" rel="stylesheet" type="text/css" />
  <link href="/static/social_icons.css" rel="stylesheet" type="text/css" />
  <link href="http://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css" rel="stylesheet" type="text/css" href="">
  <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  <link href="/static/styles.css" rel="stylesheet" type="text/css" />

  <link rel="stylesheet" href="https://use.typekit.net/c/c5c753/1w;athelas,2,NSP:W:i4,NSR:W:i7,NSN:W:n4,NSQ:W:n7;nimbus-sans-condensed,2,SKw:W:n4,SKx:W:n7;source-code-pro,2,glz:W:n4/l" media="all">
  <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Josefin+Slab">
  
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Open+Sans">
  <style>
    body {
      font-family: 'Open Sans', sans-serif;
    }

    /*.commentContainer{
      border-bottom:3px solid #e5e5e5;
    }*/
  </style>
  <style type="text/css">
    .anchor-link{
      color:blue;
    }

    .anchor-link:hover{
      color :#1BC1A1;
    }

    .postContentBody a{
      text-decoration: underline;
      color:#1BC1A1;
      font-style: italic;
    }

    .postContentBody a:hover{
      color:#1BC1A1;
    }
  </style>
</head>

<body>
  <!-- Wrap all page content here -->

  <div class="navbar navbar-default navbar-fixed-top one-edge-shadow">
    <div class="container">
      <div class="navbar-header">
        <button type="button" id="showButton" class="navbar-toggle" data-toggle="collapse" 
          data-target=".navbar-collapse">
            <span class="fa fa-bars"></span>
        </button> 
        <a class="navbar-brand" href="/home">
          Your Own Blog
        </a>
      </div>

      <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
          <!-- <li class="active"><a href="/home"><b>Home</b></a></li> -->

          <li><a href="/aboutus"><b>About Us</b></a></li>

          <li><a href="#contact"><b>Contact Us</b></a></li>

          <li><a href="/allposts"><b>All Posts</b></a></li>

          <li style="list-style: none">
            {% block navigation %} 
            
            {% endblock navigation %}
          </li>
        </ul>
      </div><!--/.nav-collapse -->
    </div>
  </div><!-- Begin page content -->

  <div class="container  push-down">

    {% block content %} 

    {% endblock %}
  </div>

  <div id="footer">
    <div class="container">
      <div class="pull-right">
        <p class="text-muted credit">Made with <span class="fa fa-heart" style="color:rgb(255, 51, 51)"></span> by <a href=
        "https://github.com/ghoshabhi">Abhishek</a>, 
        <a href='https://github.com/gristoi'>Ian</a> and 
        <a href="https://github.com/AbigailMathews">Abigail</a>
        </p>
      </div>
    </div>
  </div><!-- script references -->

  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js" type="text/javascript"></script>
  <script src="https://use.fontawesome.com/ccf0d40bb4.js" type="text/javascript"></script>
  <script src="/static/bootstrap.min.js" type="text/javascript"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js" type="text/javascript"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.5.10/clipboard.min.js"></script>
  <script src="//cdn.tinymce.com/4/tinymce.min.js" type="text/javascript"></script>

  <script type="text/javascript">
      tinymce.init({
        selector: 'h2.editable',
        inline: true,
        toolbar: 'undo redo',
        menubar: false
      });

      tinymce.init({
        // selector: "textarea",
        mode : "exact", 
        elements: "content",
        height: 500,
        plugins: [
          "advlist autolink autosave save link image lists charmap print preview hr anchor pagebreak spellchecker",
          "searchreplace wordcount visualblocks visualchars code insertdatetime media nonbreaking",
          "table contextmenu directionality emoticons template textcolor paste textcolor colorpicker textpattern"
        ],
        autosave_interval: "20s",
        toolbar1: "newdocument fullpage save | bold italic underline strikethrough | alignleft aligncenter alignright alignjustify | styleselect formatselect fontsizeselect",
        toolbar2: "cut copy paste | searchreplace | bullist numlist | outdent indent blockquote | undo redo | link unlink anchor image media code | insertdatetime preview | forecolor",
        toolbar3: "table | hr removeformat | subscript superscript | charmap emoticons | print | ltr rtl | spellchecker | visualchars visualblocks nonbreaking template pagebreak restoredraft",

        menubar: false,
        toolbar_items_size: 'small',

        style_formats: [{
          title: 'Bold text',
          inline: 'b'
        }, {
          title: 'Red text',
          inline: 'span',
          styles: {
            color: '#ff0000'
          }
        }, {
          title: 'Red header',
          block: 'h1',
          styles: {
            color: '#ff0000'
          }
        }, {
          title: 'Example 1',
          inline: 'span',
          classes: 'example1'
        }, {
          title: 'Example 2',
          inline: 'span',
          classes: 'example2'
        }, {
          title: 'Table styles'
        }, {
          title: 'Table row 1',
          selector: 'tr',
          classes: 'tablerow1'
        }],

        templates: [{
          title: 'Test template 1',
          content: 'Test 1'
        }, {
          title: 'Test template 2',
          content: 'Test 2'
        }],
        content_css: [
          '//fast.fonts.net/cssapi/e6dc9b99-64fe-4292-ad98-6974f93cd2a2.css',
          '//www.tinymce.com/css/codepen.min.css'
        ]
      });

    $(document).ready(function(){
      $('.postTitle h2').on('click', function() {
        $('.postTitle h2').html('');
      });

        $('.postTitle').on('focusout', function() {
          if ($('.postTitle h2').html() == '') {
            $('.postTitle h2').html('Click here to give a Title!');
          }
        });
    });
</script>
<script type="text/javascript">
  $(document).on('click',':not(form)[data-confirm]',function(e){
    if(!confirm($(this).data('confirm'))){
      e.stopImmediatePropagation();
      e.preventDefault();
    }
  });

  $(document).on('click',':not(form)[data-confirm-post]',function(e){
    if(!confirm($(this).data('confirmPost'))){
      e.stopImmediatePropagation();
      e.preventDefault();
    }
  });
</script>

<script type="text/javascript">
  $('.editComment').on('click',function(e){
    e.preventDefault();
    postID = $(this).data('postId');
    commentID = $(this).data('commentId');
    //var url = '/comment/' + postID + '/edit/' + commentID;
    var getURL = '/comment/'+ commentID;
    $.ajax({
      type:'get',
      url: getURL,
      dataType: 'json',
      data: {},
      success: function(data){
        $('#myModal').modal('show');
        $('.modal-header h4.modal-title').text('Edit your comment here');
        $('.modal-body textarea').text(data['comment']);
        $('.modal-body textarea').focus();
      },
      error: function(data){
        alert('Sorry couldn\'t fetch the comment! Please try again!');
      }
    });

    $('.modal-footer input[type=submit]').on('click',function(e){
        console.log('submit modal registered!');
        var comment_str = $('#myModal textarea').val();
        console.log(comment_str);
        console.log(commentID);
        console.log(postID);
        
        $.ajax({
        type:'post',
        url: '/editcomment',
        dataType: 'json',
        data: {'postID':postID,'commentID':commentID,'comment_str':comment_str},
        success: function(){
          $('div.editComment-success').text('Comment edited successfully!');
          //$('div.editComment-success').text(data['comment_str']);
          $('div.editComment-success').css('display','block');
          $('#myModal').modal('hide');
          location.reload()
        },
        error: function(){
          //$('div.editComment-fail').text(data['comment_str']);
          $('div.editComment-fail').text('Could not edit the comment! Please try again!');
          $('div.editComment-fail').css('display','block');
          $('#myModal').modal('hide');
        }
      });
    });
  });
</script>

<script type="text/javascript">
  $('.like-button').on('click', function(e){
     e.preventDefault()
     var instance = $(this);
     var key = $(this).data('key');
      $.ajax({
        type: "post",
        url: "/voteup",
        dataType: 'json',
        data: {"postID": key},
        success: function(data){
          if(data['like_count'] == -1){
            toastr.options = {
              "closeButton": true,
              "debug": false,
              "newestOnTop": false,
              "progressBar": true,
              "positionClass": "toast-top-left",
              "preventDuplicates": false,
              "onclick": null,
              "showDuration": "1500",
              "hideDuration": "1000",
              "timeOut": "5000",
              "extendedTimeOut": "1000",
              "showEasing": "swing",
              "hideEasing": "linear",
              "showMethod": "fadeIn",
              "hideMethod": "fadeOut"
            };
            toastr["error"]("You cannot like your own posts!")
            // alert('You cannot like your own posts!');
          }
          else if(data['like_count'] == -2){
            toastr.options = {
              "closeButton": true,
              "debug": false,
              "newestOnTop": false,
              "progressBar": true,
              "positionClass": "toast-top-left",
              "preventDuplicates": false,
              "onclick": null,
              "showDuration": "1500",
              "hideDuration": "1000",
              "timeOut": "5000",
              "extendedTimeOut": "1000",
              "showEasing": "swing",
              "hideEasing": "linear",
              "showMethod": "fadeIn",
              "hideMethod": "fadeOut"
            };
            toastr["warning"]("You have already liked this post!")
          }
          else{
            instance.parent().prev().find('span').html(data['like_count']+' likes');
            instance.addClass('disabled');
          }
        },
        error: function(data){
           alert('You have to be logged in to like a post!');
        }
      });
    });
</script>
</body>
</html>